<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/products.css">
    <script src="https://code.jquery.com/jquery-3.6.2.min.js"></script>
   

    <title>Products</title>
</head>



<body>
    <div id="content">
        <nav>
            <div id="logo">
                <h1 style="color: black;">products</h1>
            </div>
            <ul>
                <li><a href="index.html" style="color: black;">home</a></li>
                <li><a href="about.html" style="color: black;">about</a></li>
                <li><a href="contact.html" style="color: black;">contact</a></li>
            </ul>
            <button class="toggle-menu">&#9776;</button>
        </nav>
        <main>
            
                <section>
                    <div class="product-img-container">
                        <img src="assets/img/chaise.webp" alt="product 1" class="product-img no-lazyload"/>
    
                        <div class="overlay bottom">
                            <h2 class="text">siège de bar</h2>
                            <button class="text-two" onclick="handleModal(1)">
                                see more >>
                            </button>
    
                        </div>
                    </div>
                  
                    <div class="product-img-container">
                        <img src="assets/img/BureauChene/aperçu1.webp" alt="product 1" class="product-img no-lazyload"/>
    
                        <div class="overlay bottom">
                            <h2 class="text">bureau</h2>
                            <button class="text-two" onclick="handleModal(2)">
                                see more >>
                            </button>
    
                        </div>
                    </div>
                    <div class="product-img-container">
                        <img src="assets/img/miroirVert/miroir.webp" alt="product 1" class="product-img no-lazyload"/>
    
                        <div class="overlay bottom">
                            <h2 class="text">miroir</h2>
                            <button class="text-two" onclick="handleModal(3)">
                                see more >>
                            </button>
    
                        </div>
                    </div>
                    
                </section>

            <section>

                <div class="product-img-container">
                    <img src="assets/img/jardiniereBleue/jardinière.webp" alt="product 1" class="product-img no-lazyload"/>

                    <div class="overlay bottom">
                        <h2 class="text">jardinière</h2>
                        <button class="text-two" onclick="handleModal(4)">
                            see more >>
                        </button>

                    </div>
                </div>
              
                <div class="product-img-container">
                    <img src="assets/img/LampeOrange/lampe.webp" alt="product 1" class="product-img no-lazyload"/>

                    <div class="overlay bottom">
                        <h2 class="text">lampe</h2>
                        <button class="text-two" onclick="handleModal(5)">
                            see more >>
                        </button>

                    </div>
                </div>
                <div class="product-img-container">
                    <img src="assets/img/tableBasse/tableBasse.webp" alt="product 1" class="product-img no-lazyload"/>

                    <div class="overlay bottom">
                        <h2 class="text">table basse</h2>
                        <button class="text-two" onclick="handleModal(6)">
                            see more >>
                        </button>

                    </div>
                </div>
               
                </section>
                <section>
                  
                    <div class="product-img-container">
                        <img src="assets/img/enseigne/enseigne.webp" alt="product 1" class="product-img no-lazyload"/>
    
                        <div class="overlay bottom">
                            <h2 class="text">enseigne</h2>
                            <button class="text-two" onclick="handleModal(7)">
                                see more >>
                            </button>
    
                        </div>
                    </div>

                    <div class="product-img-container lilpic">
                        <img src="assets/img/meubleYemmaRose/meuble.webp" alt="product 1" class="product-img no-lazyload"/>
    
                        <div class="overlay bottom">
                            <h2 class="text">meuble</h2>
                            <button class="text-two" onclick="handleModal(8)">
                                see more >>
                            </button>
    
                        </div>
                    </div>

                    <div class="product-img-container">
                        <img src="assets/img/supportVernis/TEST-097.webp" alt="product 1" class="product-img no-lazyload"/>
    
                        <div class="overlay bottom">
                            <h2 class="text">support pour vernis</h2>
                            <button class="text-two" onclick="handleModal(9)">
                                see more >>
                            </button>
    
                        </div>
                    </div>

                       
                </section>
                 
                <!-- Modales -->

        <div id="REWORK-modal-1">
            <button class="close-panels-button" onclick="handleModal()">X</button>
            <div id="REWORK-product-title"></div>
            <div id="REWORK-product-infos"></div>
        </div>

        <div id="REWORK-modal-2">

            <div id="REWORK-carousel-container">
                <figure id="REWORK-carousel-figure" data-gap="5"></figure>
                <nav id="REWORK-carousel-nav">
                    <button class="REWORK-carousel-nav-prev">Prev</button>
                    <button class="REWORK-carousel-nav-next">Next</button>
                </nav>

            </div>
        </div>
                
        </main>
    </div>
</body>

<script>
    const carouselsData = [
        {
            id: 1,
            name: "Carousel 1",
            infos: "<div><table><tbody><tr><td><strong>Matériaux</strong></td><td><p>DONNEES A ENTRER</p></td></tr><tr><td><strong>Disponibilité</strong></td><td><p>DONNEES A ENTRER</p></td></tr></tbody></table></div>", // n'importe quel type de données, attention a bien nommer les clefs
            images: [
                {src: "assets/img/siegeRoseBar/Session studio-083.webp"},
                {src: "assets/img/siegeRoseBar/Session studio-085.webp"},
                {src: "assets/img/siegeRoseBar/Session studio-087.webp"},
                {src: "assets/img/siegeRoseBar/Session studio-088.webp"},
                {src: "assets/img/siegeRoseBar/Session studio-090.webp"},
                {src: "assets/img/siegeRoseBar/Session studio-092.webp"},
                {src: "assets/img/siegeRoseBar/Session studio-094.webp"},
                {src: "assets/img/siegeRoseBar/Session studio-095.webp"}
            ]
        },
        {
            id: 2,
            name: "Carousel 2",
            infos: "Ceci est une donnée en plus", // n'importe quel type de données, attention a bien nommer les clefs
            images: [
                {src: "assets/img/BureauChene/Session studio-146.webp"},
                {src: "assets/img/BureauChene/Session studio-156.webp"},
                {src: "assets/img/BureauChene/Session studio-162.webp"}
            ]
        },
        {
            id: 3,
            name: "Carousel 3",
            infos: "Ceci est une donnée en plus", // n'importe quel type de données, attention a bien nommer les clefs
            images: [
                {src: "assets/img/miroirVert/Session studio-057.webp"},
                {src: "assets/img/miroirVert/Session studio-062.webp"},
                {src: "assets/img/miroirVert/Session studio-063.webp"}
            ]
        }
    ]

    function handleModal(carouselId) {
        const modal1 = document.getElementById("REWORK-modal-1")
        const modal2 = document.getElementById("REWORK-modal-2")

        const modalState = modal1.classList.contains("shown") && modal1.classList.contains("shown")

        if (!modalState) {
            if (carouselId) {
                setCarousel(carouselId) // Gère les balises images dans le carousel
                setInfos(carouselId) // Gère les balises texte dans le panneau de gauche
            }

            setTimeout(() => {
                modal1.classList.add("shown")
                modal2.classList.add("shown")
            }, 100)

        } else {
            modal1.classList.remove("shown")
            modal2.classList.remove("shown")

            setTimeout(() => {
                clearModal()
            }, 500) // Durée du setTimeout basé sur la durés de la transition en CSS
        }
    }

    function setCarousel(carouselId) {
        const carouselElement = document.getElementById("REWORK-carousel-container")
        const figureElement = document.getElementById("REWORK-carousel-figure")

        const {images} = carouselsData.find(carousel => carousel.id === carouselId)
        let loaded = false

        images.forEach((image, index) => {
            const imageTag = document.createElement("img")
            const imageSrc = image.src
            imageTag.setAttribute("src", imageSrc)

            figureElement.appendChild(imageTag)

            if (index + 1 === images.length) loaded = true
        })

        if(loaded) instantiateCarousel(carouselElement)
    }

    function setInfos(carouselId) {
        // Permet de cibler les conteneurs pour les futures insertions
        const titleContainer = document.getElementById("REWORK-product-title")
        const infosContainer = document.getElementById("REWORK-product-infos")

        // Récupère les données a insérer
        const {name, infos} = carouselsData.find(carousel => carousel.id === carouselId)

        // Crée une balise H1 et lui insère le contenu répéré a la ligne précédente
        const h1Tag = document.createElement("h1")
        h1Tag.innerText = name
        // Insère la balise h1 dans le conteneur
        titleContainer.appendChild(h1Tag)

        // Crée une balise P et lui insère le contenu répéré précédemment
        // Insère la balise P dans le conteneur
        infosContainer.innerHTML = infos
    }

    function clearModal() {
        const carouselElement = document.getElementById("REWORK-carousel-figure")
        const titleElement = document.getElementById("REWORK-product-title")
        const infosElement = document.getElementById("REWORK-product-infos")
        while (carouselElement.firstChild) {
            carouselElement.removeChild(carouselElement.firstChild);
        }

        while (titleElement.firstChild) {
            titleElement.removeChild(titleElement.firstChild);
        }

        while (infosElement.firstChild) {
            infosElement.removeChild(infosElement.firstChild);
        }
    }

    function instantiateCarousel(root) {
        const figure = root.querySelector('figure');
        const nav = root.querySelector('nav');
        const images = figure.children;
        const n = images.length;
        const gap = root.dataset.gap || 0;
        const bfc = 'bfc' in root.dataset;
        const theta = 2 * Math.PI / n;
        let currImage = 0;

        setupCarousel(n, parseFloat(getComputedStyle(images[0]).width));
        window.addEventListener('resize', () => {
            setupCarousel(n, parseFloat(getComputedStyle(images[0]).width));
        });

        setupNavigation();

        function setupCarousel(n, s) {
            const apothem = s / (2 * Math.tan(Math.PI / n));

            figure.style.transformOrigin = `50% 50% ${-apothem}px`;

            for (let i = 0; i < n; i++) {
                images[i].style.padding = `${gap}px`;
            }
            for (let i = 1; i < n; i++) {
                images[i].style.transformOrigin = `50% 50% ${-apothem}px`;
                images[i].style.transform = `rotateY(${i * theta}rad)`;
            }
            if (bfc) {
                for (let i = 0; i < n; i++) {
                    images[i].style.backfaceVisibility = 'hidden';
                }
            }

            rotateCarousel(currImage);
        }

        function setupNavigation() {
            nav.addEventListener('click', onClick, true);

            function onClick(e) {
                e.stopPropagation();

                const t = e.target;
                if (t.tagName.toUpperCase() != 'BUTTON') {
                    return;
                }

                if (t.classList.contains('REWORK-carousel-nav-next')) {
                    currImage++;
                } else {
                    currImage--;
                }

                rotateCarousel(currImage);
            }

        }

        function rotateCarousel(imageIndex) {
            figure.style.transform = `rotateY(${imageIndex * -theta}rad)`;
        }

    }
</script>

    <script src="js/app.js"></script>
   

    
               

    

</body>
</html>

